<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.iei.admin.model.dao.AdminDao">

	<!-- ðŸŽ¬ ê´€ë¦¬ìž ë©”ì¸ (ì˜í™” ë¦¬ìŠ¤íŠ¸ ì¶œë ¥) -->
	<select id="adminMovieList" resultType="movie">
		SELECT * FROM movie_tbl ORDER BY movie_no DESC
	</select>

	<!-- ðŸŽ¬ ì˜í™” ìƒì„¸íŽ˜ì´ì§€ -->
	<select id="selectOneMovie" resultType="movie">
		SELECT * FROM movie_tbl WHERE movie_no = #{movieNo}
	</select>

	<!-- ë‹¤ìŒ ì‹œí€€ìŠ¤ ë²ˆí˜¸ ê°€ì ¸ì˜¤ê¸° -->
	<select id="getMovieNo" resultType="int">
		SELECT movie_seq.NEXTVAL FROM dual
	</select>


	<!-- ðŸŽ¬ ì˜í™” ìƒíƒœ ë³€ê²½ -->
	<update id="updateMovieStatus">
		UPDATE movie_tbl
		SET movie_status = #{movieStatus}
		WHERE movie_no = #{movieNo}
	</update>

	<!-- ðŸŽ¬ ì˜í™” ë“±ë¡ -->
	<insert id="insertMovieInfo">
		INSERT INTO movie_tbl (
		movie_no, movie_type, movie_title, movie_status,
		movie_content, movie_thumb, movie_genre, movie_grade,
		movie_runtime, movie_director, movie_actor, movie_release
		)
		VALUES (
		movie_seq.nextval,
		#{movieType}, #{movieTitle}, #{movieStatus}, #{movieContent},
		#{movieThumb}, #{movieGenre}, #{movieGrade}, #{movieRuntime},
		#{movieDirector}, #{movieActor}, #{movieRelease}
		)
	</insert>

	<!-- ðŸŽ¬ ì´ ì˜í™” ìˆ˜ -->
	<select id="totalCount" resultType="int">
		SELECT COUNT(*) FROM movie_tbl
	</select>

	<!-- ðŸŽ¬ ìŠ¤ì¼€ì¤„ ë“±ë¡ -->
	<insert id="insertSchedule" parameterType="schedule">
		INSERT INTO schedule_tbl (
		schedule_no,
		movie_no,
		screen_no,
		movie_title,
		schedule_time_start,
		schedule_time_end,
		schedule_open,
		schedule_close
		) VALUES (
		schedule_seq.nextval,
		#{movieNo},
		#{screenNo},
		#{movieTitle},
		#{scheduleTimeStart},
		#{scheduleTimeEnd},
		#{scheduleOpen},
		#{scheduleClose}
		)
	</insert>

</mapper>
